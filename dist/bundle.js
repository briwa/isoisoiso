webpackJsonp([0],[,function(t,e,i){"use strict";var n=i(15),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function e(e){var i=t.call(this,e)||this;return i.toggle(!1),i}return o(e,t),e.prototype.show=function(){this.sprite.visible||(this.toggle(!0),this.subject.view=this.id,this.emit("show"))},e.prototype.hide=function(){this.sprite.visible&&(this.toggle(!1),this.subject.doneView(),this.emit("hide"))},e}(n.a);e.a=s},,,function(t,e,i){"use strict";var n=i(15),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r=function(t){function e(e){var i=t.call(this,{id:e.id,game:e.game,subject:e.subject,parent:e.parent})||this;return i.cursorTop=0,i.cursorLeft=12,i.selectedIndex=0,i.game=e.game,i.parent=e.parent,i.on("selection",i.updateCursor),e.subject.listen("up",i.prev,i,i.parent.id),e.subject.listen("down",i.next,i,i.parent.id),e.subject.listen("action",i.selecting,i,i.parent.id),e.subject.listen("cancel",i.cancel,i,i.parent.id),i.sprite.events.onDestroy.addOnce(function(){e.subject.removeListener("up",i.prev,i),e.subject.removeListener("down",i.next,i),e.subject.removeListener("action",i.selecting,i),e.subject.removeListener("cancel",i.cancel,i)}),i}return o(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){var t=this.options[this.selectedIndex];if(!t)return null;var e=this.optionText.children[this.selectedIndex];return s({},t,{x:e.x,y:e.y,width:e.width,height:15})},enumerable:!0,configurable:!0}),e.prototype.createOptions=function(t,e){var i=this;for(this.label=e,this.options=t;this.sprite.children.length;){var n=this.sprite.children[0];this.sprite.removeChild(n),n.destroy()}this.optionText=this.game.add.group(),this.sprite.addChild(this.optionText);var o={font:"12px Arial",fill:"#FFFFFF"},s=this.options.map(function(t,e){return i.game.make.text(24,15*e+0,t.name,o)});this.cursorTop=0,this.cursor=this.game.make.text(this.cursorLeft,this.cursorTop,">",o),s.forEach(function(t){i.optionText.addChild(t)}),this.sprite.addChild(this.cursor),this.sprite.addChild(this.optionText),this.selectIndex(0)},e.prototype.prev=function(){this.selectIndex(this.selectedIndex-1)},e.prototype.next=function(){this.selectIndex(this.selectedIndex+1)},e.prototype.selectIndex=function(t){this.selectedIndex=Math.min(Math.max(0,t),this.options.length-1),this.emit("selection")},e.prototype.selecting=function(){this.selected&&this.emit("selecting",this.selected)},e.prototype.cancel=function(){this.emit("cancel")},e.prototype.updateCursor=function(){this.cursor.y=15*this.selectedIndex+this.cursorTop},e}(n.a);e.a=r},,,,,function(t,e,i){"use strict";var n=i(13),o=i(14),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t){function e(e){var i=t.call(this,e)||this;return i.views=["map"],i.signals={},i.speed=100,i.paths=[],i.busy=!1,i.map=e.map,i.createListener("pathsStart"),i.createListener("pathsFinished"),i.createListener("pathEnd"),i.createListener("up"),i.createListener("down"),i.createListener("action"),i.createListener("cancel"),i}return s(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this.views[0]},set:function(t){t?this.views.unshift(t):this.views.splice(0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inMap",{get:function(){return"map"===this.views[0]},enumerable:!0,configurable:!0}),e.prototype.registerMovement=function(){switch(this.movement.type){case"mouse":case"track":case"follow":this.movePaths();break;case"keys":this.moveKeys();break;default:throw new Error("Invalid movement type!")}},e.prototype.generatePaths=function(t){var e=t.x,i=t.y,o=t.onFinished,s={x:this.position(!0).x,y:this.position(!0).y},r=this.map.findPath(s.x,s.y,e,i);return 0===r.length?(this.stopAnimation(),[]):(o&&this.listenOnce("pathsFinished",o),this.dispatch("pathsStart"),this.paths=Object(n.b)(r),this.paths)},e.prototype.movePaths=function(){if(!this.inMap||this.busy)return!1;if(!this.paths.length)return void this.onStopMoving();var t=this.paths[0],e=t.x,i=t.y,n=t.direction;this.goTo(n,this.speed);var o=this.position(),s=5/this.speed,r=Math.abs(o.x-this.anchorX-e),a=Math.abs(o.y-this.anchorY-i);(r>=0&&r<=s&&("left"===n||"right"===n)||a>=0&&a<=s&&("up"===n||"down"===n))&&(this.dispatch("pathEnd"),this.paths=this.paths.slice(1))},e.prototype.moveKeys=function(){if(!this.inMap||this.busy)return!1;var t=this.movement,e=null;t.input.w.isDown?e="up":t.input.s.isDown?e="down":t.input.a.isDown?e="left":t.input.d.isDown&&(e="right"),this.goTo(e,this.speed),this.dispatch("pathEnd")},e.prototype.onStopMoving=function(){this.goTo(null),this.dispatch("pathsFinished")},e.prototype.doneView=function(){this.view=null},e.prototype.resetView=function(){this.views=["map"]},e.prototype.createListener=function(t,e){void 0===e&&(e="map"),this.signals[t]||(this.signals[t]={}),this.signals[t][e]=new Phaser.Signal},e.prototype.removeListener=function(t,e,i){var n=i||this,o=n.id||"map";this.signals[t][o].remove(e,n)},e.prototype.listen=function(t,e,i,n,o){var s=i||this,r=n||s.id||"map";if(!this.signals[t])throw new Error("Cannot listen to signals thad doesn't exist: "+t);this.signals[t][r]||this.createListener(t,r);var a=o?"addOnce":"add";this.signals[t][r][a](e,s)},e.prototype.listenOnce=function(t,e,i,n){this.listen(t,e,i,n,!0)},e.prototype.dispatch=function(t,e){this.signals[t]&&this.signals[t][this.view]&&this.signals[t][this.view].dispatch(e)},e}(o.a);e.a=r},,,,function(t,e,i){"use strict";function n(t){var e={x:t[0][0],y:t[0][1]};return t.slice(1).reduce(function(t,i){var n=t[t.length-1]||e,o=i[0],s=i[1],a=r(n,{x:o,y:s});return t.push({x:o,y:s,direction:a}),t},[])}function o(t){t.forEach(function(t){t.char instanceof s.a&&(t.char.npc&&(t.char.contact=!0,t.char.listenOnce("pathsStart",function(){t.char.contact=!1})),t.char.paths=[],t.char.onStopMoving())})}e.b=n,e.a=o;var s=i(9),r=function(t,e){return t.x===e.x?t.y>e.y?"up":"down":t.y===e.y?t.x>e.x?"left":"right":void 0}},function(t,e,i){"use strict";var n=function(){function t(t){var e=t.game,i=t.x,n=t.y,o=t.z,s=t.sprite,r=t.delimiter,a=t.group,c=t.map,p=t.movement;this.anchorX=.25,this.anchorY=.25,e&&(this.game=e,this.tilesize=c.tilesize,this.sprite=this.game.add.isoSprite(i+this.anchorX*this.tilesize,n+this.anchorY*this.tilesize,o,s,r,a),this.sprite.anchor.set(.5),this.sprite.animations.add("walk-up",[30,31,32,33,34,35,36,37,38].map(function(t){return t+r}),30,!0),this.sprite.animations.add("walk-left",[20,21,22,23,24,25,26,27,28].map(function(t){return t+r}),30,!0),this.sprite.animations.add("walk-right",[10,11,12,13,14,15,16,17,18].map(function(t){return t+r}),30,!0),this.sprite.animations.add("walk-down",[0,1,2,3,4,5,6,7,8].map(function(t){return t+r}),30,!0),this.game.physics.isoArcade.enable(this.sprite),this.sprite.body.collideWorldBounds=!0,this.movement=p,this.sprite.char=this)}return t.loadAssets=function(t){t.load.spritesheet("people","assets/images/people.png",32,49)},t.prototype.setImmovable=function(t){this.sprite.body.immovable=t},t.prototype.position=function(t){void 0===t&&(t=!1);var e=this.sprite.isoX/this.tilesize,i=this.sprite.isoY/this.tilesize;return{x:t?Math.floor(e):e,y:t?Math.floor(i):i}},t.prototype.currentAnimation=function(){return this.sprite.animations.currentAnim},t.prototype.playAnimation=function(t){this.currentAnimation().isPlaying&&this.currentAnimation().name===t||this.sprite.animations.play(t)},t.prototype.stopAnimation=function(t){this.sprite.animations.stop(t||this.currentAnimation().name,!0)},t.prototype.setAnimation=function(t){this.playAnimation(t),this.stopAnimation()},t.prototype.stopOppositeAnimation=function(t){this.setAnimation(function(t){return"walk-up"===t?"walk-down":"walk-down"===t?"walk-up":"walk-left"===t?"walk-right":"walk-right"===t?"walk-left":void 0}(t||this.currentAnimation().name))},t.prototype.goTo=function(t,e){switch(void 0===e&&(e=0),t||(this.stopAnimation(),this.sprite.body.velocity.x=0,this.sprite.body.velocity.y=0),this.playAnimation("walk-"+t),t){case"up":this.sprite.body.velocity.y=-e,this.sprite.body.velocity.x=0;break;case"down":this.sprite.body.velocity.y=e,this.sprite.body.velocity.x=0;break;case"left":this.sprite.body.velocity.x=-e,this.sprite.body.velocity.y=0;break;case"right":this.sprite.body.velocity.x=e,this.sprite.body.velocity.y=0}},t}();e.a=n},function(t,e,i){"use strict";var n=i(3),o=i.n(n),s=function(){function t(t){var e=this;if(this.signals={},this.id=t.id,this.subject=t.subject,this.children={},t.sprite?this.sprite=t.sprite:this.sprite=t.game.make.sprite(0,0),t.parent?t.parent.sprite.addChild(this.sprite):t.game.world.addChild(this.sprite),t.children)for(var i in t.children){var n=t.children[i];this.children[i]=new n({id:t.id+"-"+i,subject:t.subject,game:t.game,parent:this})}this.sprite.events.onDestroy.addOnce(function(){e.dispose()})}return t.prototype.on=function(t,e,i){this.signals[t]||(this.signals[t]=new o.a.Signal),this.signals[t].add(e,i||this)},t.prototype.once=function(t,e,i){this.signals[t]||(this.signals[t]=new o.a.Signal),this.signals[t].addOnce(e,i||this)},t.prototype.emit=function(t,e){this.signals[t]||(this.signals[t]=new o.a.Signal),this.signals[t].dispatch(e)},t.prototype.dispose=function(){for(var t in this.signals)this.signals[t].dispose()},t.prototype.toggle=function(t){this.sprite.visible=t},t}();e.a=s},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s});var n=[{id:"1",name:"Small Potion",type:"consumable",consumable:!0,description:"Heals a small amount of health.",price:100,effects:[{property:"hp",value:100}]},{id:"2",name:"Wooden Sword",type:"weapon",consumable:!1,description:"Some toy sword.",price:400,effects:[{property:"atk",value:100}]},{id:"3",name:"Wooden Armor",type:"armor",consumable:!1,description:"Some toy armor.",price:350,effects:[{property:"def",value:100}]},{id:"4",name:"Copper Sword",type:"weapon",consumable:!1,description:"A better toy sword.",price:650,effects:[{property:"atk",value:150}]}],o=function(t){return n.filter(function(e){return t===e.id})[0]},s=function(){return n}},function(t,e,i){"use strict";var n=i(9),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function e(e){var i=e.x,n=e.y,o=e.game,s=e.group,r=e.map,a=e.movement,c=e.delimiter,p=e.name,h=(e.hero,t.call(this,{game:o,x:i*r.tilesize,y:n*r.tilesize,z:0,sprite:"people",delimiter:c,group:s,map:r,movement:a})||this);if(h.index=0,h.forward=!0,h.pause=2e3,h.npc=!0,h.contact=!1,h.npc=!0,h.name=p,h.setImmovable(!0),h.movement)if("follow"===h.movement.type){var u=h.movement.input,d=function(){h.generatePaths({x:u.position(!0).x,y:u.position(!0).y}),u.listenOnce("pathEnd",function(){d()})};d()}else"track"===h.movement.type&&h.moveTrack(h.pause);return h}return o(e,t),e.prototype.moveTrack=function(t){var e=this,i=this.movement.input;setTimeout(function(){if(!e.inMap)return e.moveTrack(e.pause),!1;e.generatePaths({x:i[e.index][0],y:i[e.index][1],onFinished:function(){e.setNextIndex(),e.moveTrack(e.contact?e.pause/2:e.pause)}})},t)},e.prototype.setNextIndex=function(){var t=this.movement.input;this.forward=this.forward&&!!t[this.index+1]||!this.forward&&!t[this.index-1],this.forward?this.index+=1:this.index-=1},e}(n.a);e.a=s},function(t,e,i){"use strict";var n=i(1),o=i(32),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=12,a=9,c=24,p=-8,h=function(t){function e(i){var n=t.call(this,{id:i.id,game:i.game,subject:i.subject,sprite:e.createBase(i.game),children:{options:o.a}})||this;n.response=null,n.index=0,n.immediate=!1,n.dialog=i.dialog,n.children.options.sprite.y=c;var s={font:"12px Arial",fill:"#CCCCCC"},h={font:"12px Arial",fill:"#FFFFFF",wordWrap:!0,wordWrapWidth:n.sprite.width};return n.nameText=i.game.make.text(r,a,i.label,s),n.convoText=i.game.make.text(r,c,"",h),n.convoText.lineSpacing=p,n.sprite.addChild(n.nameText),n.sprite.addChild(n.convoText),i.subject.listen("action",n.next,n),n.sprite.events.onDestroy.addOnce(function(){i.subject.removeListener("action",n.next,n)}),n}return s(e,t),e.createBase=function(t){var e=t.add.graphics(0,0);e.beginFill(3355443),e.lineStyle(3,14540253,1),e.moveTo(0,0),e.lineTo(400,0),e.lineTo(400,100),e.lineTo(0,100),e.lineTo(0,0),e.endFill();var i=e.generateTexture();return e.destroy(),t.world.create(t.world.bounds.width/2-200,t.world.bounds.height/2,i)},e.prototype.next=function(){var t=this,e=this.conversations[0];if(!e)return void this.done();"dialog"===e.type?(this.convoText.text=this.conversations[0].text,this.conversations=this.conversations.slice(1)):"menu"===e.type&&(this.convoText.text="",this.children.options.createOptions(e.options),this.children.options.show(),this.children.options.once("selecting",function(i){t.children.options.hide(),e.answers?(t.conversations=e.answers[i.answer],t.next()):t.done(i.answer)}))},e.prototype.done=function(t){void 0===t&&(t=null),this.immediate&&(this.hide(),this.immediate=!1),this.emit("done",t)},e.prototype.start=function(t,e){void 0===e&&(e=!1),this.conversations=t||this.dialog.conversations,this.show(),this.next(),this.immediate=e},e}(n.a);e.a=h},,function(t,e,i){i(21),t.exports=i(53)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i.n(n),s=i(24),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();s.a;new(function(t){function e(){var e=t.call(this,600,600,o.a.AUTO)||this;return e.state.add("plain",s.a,!1),e.state.start("plain"),e}return r(e,t),e}(o.a.Game))},,,function(t,e,i){"use strict";var n=i(3),o=i.n(n),s=i(25),r=i(30),a=i(33),c=i(14),p=i(36),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u=function(t){function e(){var e=t.call(this)||this;return e.debug=!1,e}return h(e,t),e.prototype.preload=function(){c.a.loadAssets(this.game),p.a.loadAssets(this.game),this.game.plugins.add(o.a.Plugin.Isometric),this.game.time.advancedTiming=!0,this.game.physics.startSystem(o.a.Plugin.Isometric.ISOARCADE),this.game.iso.anchor.setTo(.5,.25)},e.prototype.create=function(){this.cursor=new o.a.Plugin.Isometric.Point3,this.game.physics.isoArcade.gravity.setTo(0,0,-500),this.keys={w:this.game.input.keyboard.addKey(o.a.Keyboard.W),a:this.game.input.keyboard.addKey(o.a.Keyboard.A),s:this.game.input.keyboard.addKey(o.a.Keyboard.S),d:this.game.input.keyboard.addKey(o.a.Keyboard.D),p:this.game.input.keyboard.addKey(o.a.Keyboard.P),l:this.game.input.keyboard.addKey(o.a.Keyboard.L),o:this.game.input.keyboard.addKey(o.a.Keyboard.O),",":this.game.input.keyboard.addKey(o.a.Keyboard.COMMA),".":this.game.input.keyboard.addKey(o.a.Keyboard.PERIOD)},this.map=new p.a(this.game),this.hero=new s.a({x:6,y:3,game:this.game,group:this.map.group,map:this.map,movement:{type:"keys",input:this.keys},controls:this.keys}),this.someDude=new r.a({game:this.game,group:this.map.group,map:this.map,hero:this.hero}),this.merchant=new a.a({game:this.game,group:this.map.group,map:this.map,hero:this.hero})},e.prototype.update=function(){this.game.iso.unproject(this.game.input.activePointer.position,this.cursor),this.hero.registerMovement(),this.someDude.registerMovement(),this.map.sortSprites(),this.map.collisionCheck()},e.prototype.render=function(){var t=this;this.debug&&(this.map.debug({cursor:this.cursor,paths:this.hero.paths}),this.game.debug.body(this.hero.sprite),this.game.debug.body(this.someDude.sprite),this.game.debug.text("someDude contact? "+this.someDude.contact,0,16),this.game.debug.text("current x: "+this.hero.position().x.toFixed(2)+", y: "+this.hero.position().y.toFixed(2),0,32),this.hero.paths.length&&this.hero.paths.forEach(function(e,i){t.game.debug.text("x: "+e.x+", y: "+e.y+", dir: "+e.direction,0,48+16*i)}))},e}(o.a.State);e.a=u},function(t,e,i){"use strict";var n=i(9),o=i(26),s=i(16),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},c=function(t){function e(e){var i=e.x,n=e.y,s=e.game,r=e.group,a=e.map,c=e.movement,p=e.controls,h=t.call(this,{game:s,x:i*a.tilesize,y:n*a.tilesize,z:0,sprite:"people",delimiter:0,group:r,map:a,movement:c})||this;return h.debug=!1,h.gold=100,h.inventory=[],h.stats={hp:{base:100,extra:0,battle:100},mp:{base:100,extra:0,battle:100},atk:{base:10,extra:0,battle:10},def:{base:10,extra:0,battle:10}},h.equipment={armor:null,weapon:null,accessory:null},h.name="Hero",h.controls=p,h.ingame=new o.a({id:"ingame",game:h.game,subject:h}),"mouse"===h.movement.type&&s.input.onDown.add(function(){var t=h.movement,e={x:Math.floor(t.input.x/a.tilesize),y:Math.floor(t.input.y/a.tilesize)};e.x>=0&&e.y>=0&&e.x<a.grid.length&&e.y<a.grid.length&&h.generatePaths({x:e.x,y:e.y})}),h.controls.p.onDown.add(function(){h.dispatch("action")}),h.controls.l.onDown.add(function(){h.dispatch("cancel")}),h.controls.w.onDown.add(function(){h.dispatch("up")}),h.controls.s.onDown.add(function(){h.dispatch("down")}),h.controls.o.onDown.add(function(){!h.ingame.sprite.visible&&h.inMap?h.ingame.show():h.ingame.hide()}),h.controls[","].onDown.add(function(){h.debug&&(h.gold+=1e3)}),h.controls["."].onDown.add(function(){h.debug=!h.debug}),h}return r(e,t),e.prototype.setEquipped=function(t,e){this.inventory.filter(function(e){return t===e.id})[0].equipped=e},e.prototype.purchaseItem=function(t){var e=Object(s.a)(t);this.gold-=e.price,this.acquireItem(e.id)},e.prototype.acquireItem=function(t){var e=Object(s.a)(t);this.inventory.push(a({},e,{equipped:!!e.consumable&&null}))},e.prototype.useItem=function(t){t.consumable&&this.applyItemEffect(t.id)},e.prototype.discardItem=function(t){t.equipped||(this.inventory=this.inventory.filter(function(e){return t.id!==e.id}))},e.prototype.equipItem=function(t){var e=Object(s.a)(t);e.consumable||(this.equipment[e.type]&&this.unequipItem(this.equipment[e.type].id),this.equipment[e.type]=e,this.applyItemEffect(e.id),this.setEquipped(t,!0))},e.prototype.unequipItem=function(t){var e=Object(s.a)(t);e.consumable||(this.equipment[e.type]=null,this.applyItemEffect(e.id,!0),this.setEquipped(t,!1))},e.prototype.applyItemEffect=function(t,e){var i=this;void 0===e&&(e=!1);var n=Object(s.a)(t);n.effects.forEach(function(t){var o=n.consumable?"battle":"extra",s=i.stats[t.property].base+i.stats[t.property].extra,r=i.stats[t.property][o]+t.value*(e?-1:1);i.stats[t.property][o]=n.consumable?Math.min(s,r):r})},e}(n.a);e.a=c},function(t,e,i){"use strict";var n=i(1),o=i(4),s=i(27),r=i(28),a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=12,p=9,h=40,u=440,d=[{id:"1",name:"Inventory"},{id:"2",name:"Stats"},{id:"3",name:"Settings"}],l=function(t){function e(i){var n=t.call(this,{id:i.id,subject:i.subject,game:i.game,sprite:e.createBase(i.game),children:{menu:o.a,inventory:r.a,stats:s.a}})||this;n.gold=i.game.make.text(u,c,"",{font:"12px Arial",fill:"#FFFFFF"}),n.sprite.addChild(n.gold);var a=n.children.menu,l=n.children.inventory,m=n.children.stats;return a.sprite.y=h+p,a.createOptions(d),a.on("selecting",function(t){l.hide(),m.hide(),"Inventory"===t.name?l.show():"Stats"===t.name&&m.show()}),n.on("show",function(){n.gold.text=n.subject.gold+" G"}),n.on("hide",function(){l.children.itemActions.hide(),l.hide(),m.hide(),n.subject.resetView()}),n}return a(e,t),e.createBase=function(t){var e=t.add.graphics(0,0);e.beginFill(3355443),e.lineStyle(3,14540253,1),e.moveTo(0,0),e.lineTo(480,0),e.lineTo(480,400),e.lineTo(0,400),e.lineTo(0,0),e.endFill(),e.moveTo(0,h),e.lineTo(480,h),e.moveTo(80,h),e.lineTo(80,400);var i=e.generateTexture();return e.destroy(),t.world.create(t.world.bounds.width/2-240-3,c,i)},e}(n.a);e.a=l},function(t,e,i){"use strict";var n=i(1),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=80,r=50,a=function(t){function e(e){var i=t.call(this,{id:e.id,subject:e.subject,game:e.game,parent:e.parent})||this;return i.game=e.game,i.sprite.x=s,i.sprite.y=r,i.statsLayer=e.game.make.sprite(0,0),i.equipmentLayer=e.game.make.sprite(0,r),i.sprite.addChild(i.statsLayer),i.sprite.addChild(i.equipmentLayer),i.on("show",function(){i.updateStats(i.subject.stats,i.subject.equipment)}),i.subject.listen("cancel",i.hide,i),i.sprite.events.onDestroy.addOnce(function(){i.subject.removeListener("cancel",i.hide,i)}),i}return o(e,t),e.prototype.updateStats=function(t,e){for(var i=this;this.statsLayer.children.length;){var n=this.statsLayer.children[0];this.statsLayer.removeChild(n),n.destroy()}for(;this.equipmentLayer.children.length;){var n=this.equipmentLayer.children[0];this.statsLayer.removeChild(n),n.destroy()}var o={font:"12px Arial",fill:"#FFFFFF"};Object.keys(t).forEach(function(e,n){var s=t[e].extra>0?"+ "+t[e].extra:"",r=["mp","hp"].indexOf(e)>=0?t[e].battle+"/"+t[e].base+" "+s:t[e].base+" "+s,a=i.game.make.text(12,12*n,e.toUpperCase()+": "+r,o);i.statsLayer.addChild(a)}),Object.keys(e).forEach(function(t,n){var s=i.game.make.text(12,12*n,t.toUpperCase()+": "+(e[t]?e[t].name:""),o);i.equipmentLayer.addChild(s)})},e}(n.a);e.a=a},function(t,e,i){"use strict";var n=i(1),o=i(4),s=i(29),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=80,c=50,p=function(t){function e(e){var i=t.call(this,{id:e.id,subject:e.subject,game:e.game,parent:e.parent,children:{items:o.a,itemActions:s.a}})||this;return i.game=e.game,i.noItems=e.game.make.text(10,0,"No items",{font:"12px Arial",fill:"#FFFFFF"}),i.sprite.addChild(i.noItems),i.sprite.x=a,i.sprite.y=c,i.children.items.on("selecting",function(t){i.children.itemActions.setActions(t),i.children.itemActions.show()}),i.children.items.on("cancel",function(t){i.hide()}),i.children.itemActions.children.menu.on("selecting",function(t){var e=i.children.itemActions.context;switch(t.name){case"Use":i.subject.useItem(e),i.subject.discardItem(e),i.repopulateItems();break;case"Discard":i.subject.discardItem(e),i.repopulateItems();break;case"Equip":i.subject.equipItem(e.id);break;case"Unequip":i.subject.unequipItem(e.id)}i.children.itemActions.hide()}),i.children.itemActions.children.menu.on("cancel",function(t){i.children.itemActions.hide()}),i.on("show",function(){i.repopulateItems(),0===i.subject.inventory.length?(i.noItems.visible=!0,i.children.items.toggle(!1)):(i.noItems.visible=!1,i.children.items.toggle(!0))}),i}return r(e,t),e.prototype.repopulateItems=function(){this.children.items.createOptions(this.subject.inventory)},e}(n.a);e.a=p},function(t,e,i){"use strict";var n=i(1),o=i(4),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t){function e(e){var i=t.call(this,{id:e.id,subject:e.subject,game:e.game,parent:e.parent,children:{menu:o.a}})||this;return i.game=e.game,i.bgLayer=i.game.make.sprite(0,0),i.sprite.addChildAt(i.bgLayer,0),i}return s(e,t),e.prototype.setActions=function(t){this.bgLayer.children[0]&&this.bgLayer.children[0].destroy(),this.context=t;var e=[],i=t.x+t.width,n=t.y+t.height;t.consumable?e.push({name:"Use"},{name:"Discard"}):t.equipped?e.push({name:"Unequip"}):e.push({name:"Equip"},{name:"Discard"});var o=12*(e.length+1),s=this.game.add.graphics(0,0);s.beginFill(3355443),s.lineStyle(3,14540253,1),s.moveTo(0,0),s.lineTo(100,0),s.lineTo(100,o),s.lineTo(0,o),s.lineTo(0,0),s.endFill();var r=s.generateTexture();s.destroy();var a=this.game.make.sprite(0,0,r);this.bgLayer.addChild(a),this.bgLayer.x=i,this.bgLayer.y=n,this.children.menu.createOptions(e),this.children.menu.sprite.x=i,this.children.menu.sprite.y=n},e}(n.a);e.a=r},function(t,e,i){"use strict";var n=i(31),o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=[{id:"1",type:"dialog",text:"Long time no see, chap. How are you?"},{id:"2",type:"dialog",text:"Was wondering if you could help me with something?"},{id:"3",type:"menu",text:"Choose an option...",options:[{name:"Sure, what is it?",answer:"yes"},{name:"Sorry, kinda busy...",answer:"no"}],answers:{no:[{id:"6",type:"dialog",text:"Fine, next time it is!"}],yes:[{id:"7",type:"dialog",text:"You know what, I forgot what I wanted to ask you."}]}}],r=function(t){function e(e){var i=e.game,n=e.group,o=e.map,r=e.hero;return t.call(this,{x:3,y:3,delimiter:129,game:i,group:n,map:o,movement:{type:"track",input:[[7,3],[3,3]]},name:"Some Dude",dialog:{id:"some-dude-generic",conversations:s},hero:r})||this}return o(e,t),e}(n.a);e.a=r},function(t,e,i){"use strict";var n=i(17),o=i(18),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t){function e(e){var i=t.call(this,e)||this;return i.subject=e.hero,i.dialog=new o.a({id:e.name+"-dialog",game:e.game,subject:e.hero,dialog:e.dialog,label:i.name}),i.subject.listen("action",i.startDialog,i,"map"),i.sprite.events.onDestroy.addOnce(function(){i.subject.removeListener("action",i.startDialog,i)}),i}return s(e,t),e.prototype.startDialog=function(){var t=this;this.contact&&this.subject.inMap&&(this.dialog.start(),this.stopOppositeAnimation(this.subject.currentAnimation().name),this.busy=!0,this.dialog.on("done",function(){t.dialog.hide(),t.busy=!1,t.contact=!1}))},e}(n.a);e.a=r},function(t,e,i){"use strict";var n=i(1),o=i(4),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t){function e(e){var i=t.call(this,{id:e.id,subject:e.subject,game:e.game,parent:e.parent,children:{menu:o.a}})||this;return i.children.menu.on("selection",function(){return i.emit("selection")}),i.children.menu.on("selecting",function(t){return i.emit("selecting",t)}),i.children.menu.on("cancel",function(){return i.emit("cancel")}),i}return s(e,t),e.prototype.createOptions=function(t){this.children.menu.createOptions(t)},e}(n.a);e.a=r},function(t,e,i){"use strict";var n=i(34),o=i(16),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(t){function e(e){var i=e.game,n=e.group,s=e.map,r=e.hero,a=t.call(this,{x:0,y:5,delimiter:172,game:i,group:n,map:s,name:"Merchant Basic",hero:r,shopId:"shop-basic",items:Object(o.b)(),dialogs:{opening:{id:"shop-basic-opening",conversations:[{id:"1",type:"dialog",text:"Welcome to Basic Shop! Looking for something in particular?"}]},confirm:{id:"shop-basic-confirm",conversations:[{id:"shop-basic-confirm-menu",type:"menu",text:"Are you sure you want to buy this item?",options:[{name:"Buy this item",answer:"yes"},{name:"Cancel",answer:"no"}]}]},nomoney:{id:"shop-basic-nomoney",conversations:[{id:"1",type:"dialog",text:"You don't have sufficient funds."}]},thanks:{id:"shop-basic-thanks",conversations:[{id:"1",type:"dialog",text:"Thank you!"}]},ending:{id:"shop-basic-ending",conversations:[{id:"1",type:"dialog",text:"Come again!"}]}}})||this;return a.setAnimation("walk-right"),a}return s(e,t),e}(n.a);e.a=r},function(t,e,i){"use strict";var n=i(17),o=i(35),s=i(18),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=function(t){function e(e){var i=t.call(this,e)||this;return i.id=e.shopId,i.subject=e.hero,i.dialogs=e.dialogs,i.items=e.items,i.shop=new o.a({id:i.id,game:i.game,subject:i.subject,items:i.items,dialogs:i.dialogs,merchant:i}),i.dialog=new s.a({id:e.name+"-dialog",game:e.game,subject:e.hero,label:i.name}),e.hero.listen("action",i.startShop,i,"map"),e.hero.listen("cancel",i.endShop,i),i.sprite.events.onDestroy.addOnce(function(){i.subject.removeListener("action",i.startShop,i),i.subject.removeListener("cancel",i.endShop,i)}),i}return r(e,t),e.prototype.startShop=function(){var t=this;this.contact&&this.subject.inMap&&(this.stopOppositeAnimation(this.subject.currentAnimation().name),this.dialogs.opening?(this.dialog.start(this.dialogs.opening.conversations,!0),this.dialog.once("done",function(){t.showShop()})):this.showShop())},e.prototype.showShop=function(){this.shop.show(),this.busy=!0},e.prototype.endShop=function(){this.shop.hide(),this.dialogs.ending&&this.dialog.start(this.dialogs.ending.conversations,!0),this.busy=!1,this.contact=!1},e}(n.a);e.a=a},function(t,e,i){"use strict";var n=i(1),o=i(4),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=12,a=12,c=9,p=-8,h=160,u=40,d=440,l=function(t){function e(i){var n=t.call(this,{id:i.id,game:i.game,subject:i.subject,sprite:e.createBase(i.game),children:{menu:o.a}})||this;n.merchant=i.merchant,n.items=i.items,n.hero=i.subject;var s={font:"12px Arial",fill:"#FFFFFF",wordWrap:!0,wordWrapWidth:n.sprite.width};return n.description=i.game.make.text(h+a,u+c,"",s),n.description.lineSpacing=p,n.gold=i.game.make.text(d,r,"",s),n.sprite.addChild(n.gold),n.sprite.addChild(n.description),n.updateDescription(),n.children.menu.sprite.y=u+c,n.children.menu.createOptions(i.items),n.on("show",function(){n.children.menu.selectIndex(0),n.gold.text=n.hero.gold+" G"}),n.children.menu.on("selection",function(){n.updateDescription()}),n.children.menu.on("selecting",function(){n.select(i.dialogs)}),n}return s(e,t),e.createBase=function(t){var e=t.add.graphics(0,0);e.beginFill(3355443),e.lineStyle(3,14540253,1),e.moveTo(0,0),e.lineTo(480,0),e.lineTo(480,400),e.lineTo(0,400),e.lineTo(0,0),e.endFill(),e.moveTo(0,u),e.lineTo(480,u),e.moveTo(h,u),e.lineTo(h,400);var i=e.generateTexture();return e.destroy(),t.world.create(t.world.bounds.width/2-240-3,r,i)},e.prototype.updateDescription=function(){var t=[],e=this.items[this.children.menu.selectedIndex],i=e.effects.map(function(t){return""+t.property.toUpperCase()+(t.value<0?t.value:"+"+t.value)}).join("\n");t.push(e.description),t.push(""+i),t.push("Price: "+e.price+" G"),this.description.text=t.join("\n"),this.selectedItem=e},e.prototype.select=function(t){var e=this,i=this.items[this.children.menu.selectedIndex];if(this.hero.gold<i.price)return void this.merchant.dialog.start(t.nomoney.conversations,!0);this.merchant.dialog.start(t.confirm.conversations,!0),this.merchant.dialog.once("done",function(n){if("yes"===n)e.hero.purchaseItem(i.id),e.gold.text=e.hero.gold+" G",t.thanks&&e.merchant.dialog.start(t.thanks.conversations,!0);else{if("no"!==n)throw new Error("Invalid response: "+n+".");t.cancel&&e.merchant.dialog.start(t.cancel.conversations,!0)}})},e}(n.a);e.a=l},function(t,e,i){"use strict";var n=i(19),o=i.n(n),s=i(13),r=36,a=[[0,0,2,3,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,2,0,0,0,0,0]],c=[{name:"grass",isoZ:5,anchor:[.5,0]},{name:"wall",isoZ:0,anchor:[.5,.5]},{name:"bush1",isoZ:0,anchor:[.5,0]},{name:"bush2",isoZ:0,anchor:[.5,0]}],p=function(){function t(t){this.grid=a.slice(),this.tilesize=r,this.tile=c,t&&this.setup(t)}return t.loadAssets=function(t){t.load.atlasJSONHash("tileset","assets/images/tileset.png","assets/images/tileset.json")},t.prototype.findPath=function(t,e,i,n){var s=new o.a.Grid(this.grid);return(new o.a.AStarFinder).findPath(t,e,i,n,s)},t.prototype.setWalkable=function(t,e,i){this.grid[e][t]=i?0:9},t.prototype.setup=function(t){this.game=t,this.group=this.game.add.group();for(var e=0;e<this.grid.length;e+=1)for(var i=0;i<this.grid[e].length;i+=1){var n=this.grid[e][i],o=this.tile[n],s=this.game.add.isoSprite(i*r,e*r,o.isoZ,"tileset",o.name,this.group);s.anchor.set(o.anchor[0],o.anchor[1]),s.smoothed=!1,0!==this.grid[e][i]&&(this.game.physics.isoArcade.enable(s),s.body.collideWorldBounds=!0,s.body.immovable=!0)}},t.prototype.debug=function(t){var e=this,i=t.cursor,n=t.paths;this.group.forEach(function(t){var o=t;if("people"!==o.key){(o.inPath||o.walkable)&&(o.tint=16777215);var s=o.isoX/e.tilesize,r=o.isoY/e.tilesize;n.some(function(t){return t.x===s&&t.y===r})?(o.tint=12303291,o.inPath=!0):o.inPath=!1;0!==e.grid[r][s]?(o.walkable=!0,o.tint=4473924):o.walkable=!1;var a=o.isoBounds.containsXY(i.x,i.y);o.selected||!a||o.inPath||o.walkable?o.selected&&!a&&(o.selected=!1,o.tint=16777215):(o.selected=!0,o.tint=16729088)}},this)},t.prototype.sortSprites=function(){this.game.iso.topologicalSort(this.group)},t.prototype.collisionCheck=function(){this.game.physics.isoArcade.collide(this.group,null,function(){Object(s.a)([].slice.call(arguments))})},t}();e.a=p},,,,,,,,,,,,,,,,,function(t,e){}],[20]);